!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-mutation-summary")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-mutation-summary"],t):(n.elliptical=n.elliptical||{},n.elliptical.binding=t(n.elliptical.utils,n.elliptical.mutation.summary),n.returnExports=n.elliptical.binding)}(this,function(n,t){function e(){$(document).on("OnDocumentMutation",function(n,t){t.added&&r(t.added),t.removed&&s(t.removed)})}function o(){var n=document.querySelectorAll(b);n.length&&setTimeout(function(){r(n)},I)}function i(){return"ontouchend"in document?"touchstart":"click"}function c(){return"ontouchend"in document?"touchend":"click"}function u(){return"ontouchend"in document?"tap":"click"}function l(n,t){x||e(),x=!0;var o=E.obj;o.fn=t,o.context=this,N.set(n,o),this.click=i(),this.press=c(),this.tap=u()}function r(n){N.forEach(function(t,e){var o=$(n).selfFind("["+g+'="'+e+'"]');o[0]&&$.each(o,function(n,o){f(o)&&a(t,e,o)})})}function a(n,t,e){var o=v.id(8);e._EA_BINDING_ID=o;var i=j.obj;i.node=e,i.context=n.context,i.attrValue=t,i.fn=n.fn,_.set(o,i),d(n.context,e,n.fn)}function d(n,t,e){setTimeout(function(){e.call(n,t)},y)}function f(n){var t=!0;return _.forEach(function(e,o){n===e.node&&(t=!1)}),t}function s(n){var t=$(n).selfFind(b);t.length&&t.length>0&&$.each(t,function(n,t){t._EA_BINDING_ID&&p(t)})}function p(n){var t=n._EA_BINDING_ID,e=_.get(t);void 0===e?h(n):m(e,n,t)}function m(n,t,e){n.context.dispose(),n.context=null,t&&t.parentNode&&t.parentNode.removeChild(t),n.fn=null,n.node=null,_["delete"](e)}function h(n){_.forEach(function(t,e){n===t.node&&m(t,n,e)})}var v=n.random,b="[ea-bind]",g="ea-bind",x=!1,y=500,I=250,N=new Map,_=new Map;t.connect();var E={get obj(){return{fn:null,context:null}}},j={get obj(){return{node:null,context:null,fn:null,attrValue:null}}};return document.addEventListener("WebComponentsReady",function(n){o()}),$(function(){void 0===window.WebComponents&&o()}),l.prototype.jsonParseMessage=function(n){try{var t=JSON.parse(n);return t.message?t.message:n}catch(e){return n}},l.prototype.dispose=function(){},function(n,t){return new l(n,t)}});