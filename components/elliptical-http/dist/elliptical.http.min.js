!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t($):"function"==typeof define&&define.amd?define(["jquery"],t):(e.elliptical.http=e.elliptical.http||{},e.elliptical.http.browser=t(e.$),e.returnExports=e.elliptical.http.browser)}(this,function(e){var t=function(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),r=0;r<n.length;r++){var o=n[r],i=o.indexOf(": ");if(i>0){var s=o.substring(0,i),a=o.substring(i+2);t[s]=a}}return t},n={send:function(n,r){var o={type:n.method||"GET",dataType:n.dataType||"json",url:n.protocol+"://"+n.host+":"+(n.port||80)+n.path};n.data&&(n.data=JSON.stringify(n.data),o.data=n.data,o.contentType="application/json"),n.authorization&&(o.beforeSend=function(e){e.setRequestHeader("Authorization",n.authorization)});e.ajax(o).done(function(e,t){try{"string"==typeof e&&(e=JSON.parse(e)),r(null,e)}catch(n){var o={statusCode:500,message:n};r(o,null)}}).fail(function(e,n,o){var i={},s=null;i.statusCode=e.status,e.responseJSON&&e.responseJSON.message?i.message=e.responseJSON.message:e.responseJSON?(s=e.responseJSON,i.message=o):i.message=o,i.headers=t(e.getAllResponseHeaders()),r(i,s)})}};return n}),function(e,t){if("undefined"!=typeof module&&module.exports){var n=require("./node");"undefined"!=typeof window&&(n=require("./browser")),module.exports=t(n,require("elliptical-crypto"))}else if("function"==typeof define&&define.amd)define(["./browser","elliptical-crypto"],t);else{var r=e.elliptical.http.browser,o=e.elliptical.crypto,i=t(r,o);i.browser=r,e.elliptical.http=i,e.returnExports=e.elliptical.http}}(this,function(e,t){var n={send:function(t,n){e.send(t,function(e,t){n&&n(e,t)})},base64Encrypt:t.base64Encrypt,base64:t.base64,encodeSessionToken:function(e){return"Session "+e},encodeBasicToken:function(e){return"Basic "+e},encodeBasicCredentials:function(e,n){return t.base64Encrypt(e,n)},encodeOAuthToken:function(e){return"OAuth "+e}};return n.crypto=t,n});