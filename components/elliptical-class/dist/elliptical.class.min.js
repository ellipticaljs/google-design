!function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],e):(t.__tmp9z=t.__tmp9z||{},t.__tmp9z.extend=e(t.elliptical.utils),t.returnExports=t.__tmp9z.extend)}(this,function(t){var e=t.object.isPlainObject,n=Array.isArray,r=function(){var t,i,s,a,l=arguments[0]||{},u=1,o=arguments.length,p=!1;for("boolean"==typeof l&&(p=l,l=arguments[1]||{},u=2);o>u;u++)if(null!==(t=arguments[u]))for(i in t)if(s=l[i],a=t[i],l!==a)if(p&&a&&(e(a)||n(a))){var c=s&&(e(s)||n(s))?s:n(a)?[]:{};l[i]=r(p,c,a)}else"undefined"!=typeof a&&(l[i]=a);return l};return r}),function(t,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("elliptical-utils"),require("./extend")):"function"==typeof define&&define.amd?define(["elliptical-utils","./extend"],e):(t.elliptical=t.elliptical||{},t.elliptical.Class=e(t.elliptical.utils,t.__tmp9z.extend),t.returnExports=t.elliptical.Class)}(this,function(t,e){var n=t.array.makeArray,r=t.object.isFunction,i=Array.isArray,s=t.array.concatArgs,a=!1,l=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,u=function(t,e,n){n=n||t;for(var i in t)n[i]=r(t[i])&&r(e[i])&&l.test(t[i])?function(t,n){return function(){var r,i=this._super;return this._super=e[t],r=n.apply(this,arguments),this._super=i,r}}(i,t[i]):t[i]},o=function(){arguments.length&&o.extend.apply(o,arguments)};return e(o,{proxy:function(t){var e,a=n(arguments);t=a.shift(),i(t)||(t=[t]),e=this;for(var l=0;l<t.length;l++)if("string"==typeof t[l]&&!r(this[t[l]]))throw"class.js "+(this.fullName||this.Class.fullName)+" does not have a "+t[l]+"method!";return function(){for(var n,r,l=s(a,arguments),u=t.length,o=0;u>o;o++)r=t[o],r&&(n="string"==typeof r,n&&e._set_called&&(e.called=r),l=(n?e[r]:r).apply(e,l||[]),u-1>o&&(l=!i(l)||l._use_call?[l]:l));return l}},newInstance:function(){var t,e=this.rawInstance();return e.setup&&(t=e.setup.apply(e,arguments)),e.init&&e.init.apply(e,i(t)?t:arguments),e},setup:function(t,n){return this.defaults=e(!0,{},t.defaults,this.defaults),arguments},rawInstance:function(){a=!0;var t=new this;return a=!1,t},extend:function(t,n){function r(){return a?void 0:this.constructor!==r&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.Class.newInstance.apply(this.Class,arguments)}n||(n=t,t=null),n=n||{};var i,l=this,o=this.prototype;a=!0,i=new this,a=!1,u(n,o,i);for(name in this)this.hasOwnProperty(name)&&-1==["prototype","defaults"].indexOf(name)&&(r[name]=this[name]);u(t,this,r),e(r,{prototype:i,constructor:r}),r.prototype.Class=r.prototype.constructor=r;var p=r.setup.apply(r,s([l],arguments));return r.init&&r.init.apply(r,p||[]),r}}),o.callback=o.prototype.callback=o.prototype.proxy=o.proxy,o});