!function(n,i){"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define([],i):(n.elliptical=n.elliptical||{},n.elliptical.Event=i(),n.returnExports=n.elliptical.Event)}(this,function(){var n={};return function(i){function t(){var n={},t=Function;return{emit:function(){var t,e,l,o=arguments,c=n[o[0]];c&&(t=c.length,e=o.length>1?Array.prototype.splice.call(o,1):[],setTimeout(function(){for(l=0;t>l;l+=1)try{c[l].apply(i,e)}catch(n){}c=i=e=null},0))},on:function(i,e){if("string"!=typeof i)throw"invalid or missing channel";if(!(e instanceof t))throw"invalid or missing callback";return n[i]||(n[i]=[]),n[i].push(e),{channel:i,callback:e}},off:function(i,e){if(i.channel&&i.callback&&(e=i.callback,i=i.channel),"string"!=typeof i)throw"invalid or missing channel";if(!(e instanceof t))throw"invalid or missing callback";var l,o=n[i],c=o instanceof Array?o.length:0;for(l=0;c>l;l+=1)if(o[l]===e){o.splice(l,1);break}},flush:function(){n={}},list:function(i){i&&i(n)}}}n.init=t()}(this),n.init});